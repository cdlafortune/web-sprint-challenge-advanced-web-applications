{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\cdsud\\\\OneDrive\\\\Desktop\\\\LambdaSchool\\\\web-sprint-challenge-advanced-web-applications\\\\client\\\\src\\\\components\\\\Login.js\";\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\n\nconst Login = props => {\n  // make a post request to retrieve a token from the api\n  // when you have handled the token, navigate to the BubblePage route\n  const [credentials, setCredentials] = useState({});\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  const handleChanges = e => {\n    setCredentials({ ...credentials,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setIsLoading(true);\n    axios.post(\"http://localhost:5000/api/login\", credentials).then(res => {\n      console.log(res);\n      localStorage.setItem(\"token\", res.data.payload);\n      props.history.push(\"/protected\");\n      setIsLoading(false);\n    }).catch(err => {\n      console.log(err);\n      setIsLoading(false);\n    });\n  };\n\n  return React.createElement(\"div\", {\n    className: \"login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, \"Welcome to the Bubble App!\"), React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, error), isLoading ? React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, \"Loading...\") : React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }));\n};\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/cdsud/OneDrive/Desktop/LambdaSchool/web-sprint-challenge-advanced-web-applications/client/src/components/Login.js"],"names":["React","useState","axios","Login","props","credentials","setCredentials","isLoading","setIsLoading","error","setError","handleChanges","e","target","name","value","handleSubmit","preventDefault","post","then","res","console","log","localStorage","setItem","data","payload","history","push","catch","err"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,KAAK,GAAIC,KAAD,IAAW;AACvB;AACA;AACA,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCL,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACM,SAAD,EAAYC,YAAZ,IAA4BP,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAACQ,KAAD,EAAQC,QAAR,IAAoBT,QAAQ,CAAC,EAAD,CAAlC;;AAEA,QAAMU,aAAa,GAAGC,CAAC,IAAI;AACzBN,IAAAA,cAAc,CAAC,EACb,GAAGD,WADU;AAEb,OAACO,CAAC,CAACC,MAAF,CAASC,IAAV,GAAiBF,CAAC,CAACC,MAAF,CAASE;AAFb,KAAD,CAAd;AAID,GALD;;AAOA,QAAMC,YAAY,GAAGJ,CAAC,IAAI;AACxBA,IAAAA,CAAC,CAACK,cAAF;AACAT,IAAAA,YAAY,CAAC,IAAD,CAAZ;AAEAN,IAAAA,KAAK,CAACgB,IAAN,CAAW,iCAAX,EAA8Cb,WAA9C,EACGc,IADH,CACQC,GAAG,IAAI;AACXC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAG,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BJ,GAAG,CAACK,IAAJ,CAASC,OAAvC;AACAtB,MAAAA,KAAK,CAACuB,OAAN,CAAcC,IAAd,CAAmB,YAAnB;AACApB,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACD,KANH,EAOGqB,KAPH,CAOSC,GAAG,IAAI;AACZT,MAAAA,OAAO,CAACC,GAAR,CAAYQ,GAAZ;AACAtB,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACD,KAVH;AAWD,GAfD;;AAoBA,SACE;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKC,KAAL,CAFF,EAIGF,SAAS,GAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAJ,GACR;AAAM,IAAA,QAAQ,EAAES,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALJ,CADF;AAcD,CAhDD;;AAkDA,eAAeb,KAAf","sourcesContent":["import React, {useState} from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst Login = (props) => {\r\n  // make a post request to retrieve a token from the api\r\n  // when you have handled the token, navigate to the BubblePage route\r\n  const [credentials, setCredentials] = useState({});\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const handleChanges = e => {\r\n    setCredentials({\r\n      ...credentials, \r\n      [e.target.name]: e.target.value\r\n    });\r\n  };\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n\r\n    axios.post(\"http://localhost:5000/api/login\", credentials)\r\n      .then(res => {\r\n        console.log(res);\r\n        localStorage.setItem(\"token\", res.data.payload);\r\n        props.history.push(\"/protected\");\r\n        setIsLoading(false);\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n        setIsLoading(false);\r\n      });\r\n  }\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <h1>Welcome to the Bubble App!</h1>\r\n      <h3>{error}</h3>\r\n\r\n      {isLoading ? (<h3>Loading...</h3>) : (\r\n        <form onSubmit={handleSubmit}>\r\n\r\n\r\n\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}